!
no enable password
no aaa root
!
username admin privilege 15 role network-admin nopassword
username ansible privilege 15 role network-admin secret sha512 $6$Dzu11L7yp9j3nCM9$FSptxMPyIL555OMO.ldnjDXgwZmrfMYwHSr0uznE5Qoqvd9a6UdjiFcJUhGLtvXVZR1r.A/iF5aAt50hf/EK4/
username arista privilege 15 role network-admin secret sha512 $6$7WhvEi5Ce5f5Ut3z$Ethmha7rb710RKsaVteusVOuNP1Utfjzse58xxbgiZp4MF0fp7BX5lAw8yBgv/HWCihVomuCSrsJx8wKnJ7Tm1
username tom privilege 15 role network-admin secret sha512 $6$TyWn7NeXe/vBRl1t$S4fEOkPmpTGz7TLHCzDNP8D2UfpO3ciC2MuGmCaFMVF3B7zt9KSnt9yq99y69XBIY1HV/kO4QjOk32yRQOru5.
!
alias ale show ip hardware ale routes unprogrammed
alias ale6 show ipv6 hardware ale routes unprogrammed
alias cc clear counters
alias fabric show platform fap fabric rates mbps
alias fib show ip hardware fib routes | grep bgp | wc -l
alias fib6 show ipv6 hardware fib routes | grep bgp | wc -l
alias l3 show platform sand l3 summary
alias route6sum show ipv6 route summary
alias routesum show ip route summary
alias senz show interface counter error | nz
alias shmc show int | awk '/^[A-Z]/ { intf = $1 } /, address is/ { print intf, $6 }'
alias snz show interface counter | nz
alias spd show port-channel %1 detail all
alias sli show lacp interface Ethernet %1 detailed
alias sqnz show interface counter queue | nz
alias srnz show interface counter rate | nz
alias summary show bgp summary
alias summary6 show ipv6 bgp summary
!
vlan internal order ascending range 1006 1199
!
transceiver qsfp default-mode 4x10G
!
service routing protocols model multi-agent
!
hostname s2-pe01
ip name-server vrf MGMT 8.8.8.8
ip name-server vrf MGMT 192.168.2.1
dns domain atd.lab
!
spanning-tree mode none
!
clock timezone Europe/Paris
!
vlan 1811
   name SVC01_C1_VLAN_FIREWALL
!
vrf instance MGMT
!
vrf instance SVC01_VRF01
!
management api http-commands
   protocol https
   no shutdown
   !
   vrf MGMT
      no shutdown
!
aaa authorization exec default local
!
interface Ethernet1
   description P2P_s2-p01_Ethernet1
   no shutdown
   mtu 1500
   no switchport
   ip address 10.255.3.16/31
   mpls ip
   isis enable CORE
   isis circuit-type level-2
   isis metric 50
   isis hello padding
   isis network point-to-point
   isis authentication mode md5
   isis authentication key 7 $1c$sTNAlR6rKSw=
!
interface Ethernet2
   description P2P_s2-p02_Ethernet1
   no shutdown
   mtu 1500
   no switchport
   ip address 10.255.3.18/31
   mpls ip
   isis enable CORE
   isis circuit-type level-2
   isis metric 50
   isis hello padding
   isis network point-to-point
   isis authentication mode md5
   isis authentication key 7 $1c$sTNAlR6rKSw=
!
interface Loopback0
   description ROUTER_ID
   no shutdown
   ip address 10.255.1.5/32
   node-segment ipv4 index 5
   isis enable CORE
   isis passive
!
interface Loopback1810
   description Test loopback
   no shutdown
   vrf SVC01_VRF01
   ip address 10.18.0.5/32
!
interface Management1
   description OOB_MANAGEMENT
   no shutdown
   vrf MGMT
   ip address 192.168.2.21/24
!
interface Vlan1811
   description SVC01_C1_VLAN_FIREWALL
   no shutdown
   vrf SVC01_VRF01
   ip address virtual 10.18.11.1/24
!
ip virtual-router mac-address 00:1c:73:00:dc:00
!
ip routing
no ip routing vrf MGMT
ip routing vrf SVC01_VRF01
!
ip route 0.0.0.0/0 192.168.2.1
!
mpls ip
!
ntp local-interface Management0
ntp server fr.pool.ntp.org prefer burst iburst local-interface Management0
ntp server uk.pool.ntp.org burst iburst local-interface Management0
!
router bfd
   multihop interval 300 min-rx 300 multiplier 3
!
router bgp 65001
   router-id 10.255.1.5
   update wait-install
   no bgp default ipv4-unicast
   maximum-paths 4 ecmp 4
   neighbor MPLS-OVERLAY-PEERS peer group
   neighbor MPLS-OVERLAY-PEERS remote-as 65001
   neighbor MPLS-OVERLAY-PEERS update-source Loopback0
   neighbor MPLS-OVERLAY-PEERS bfd
   neighbor MPLS-OVERLAY-PEERS password 7 Q4fqtbqcZ7oQuKfuWtNGRQ==
   neighbor MPLS-OVERLAY-PEERS send-community
   neighbor MPLS-OVERLAY-PEERS maximum-routes 0
   neighbor 10.255.0.1 peer group MPLS-OVERLAY-PEERS
   neighbor 10.255.0.1 description s1-p01_Loopback0
   neighbor 10.255.0.4 peer group MPLS-OVERLAY-PEERS
   neighbor 10.255.0.4 description s2-p02_Loopback0
   !
   vlan 1811
      rd 10.255.1.5:11811
      route-target both 11811:11811
      redistribute learned
   !
   address-family evpn
      neighbor default encapsulation mpls next-hop-self source-interface Loopback0
      neighbor MPLS-OVERLAY-PEERS activate
   !
   address-family ipv4
      no neighbor MPLS-OVERLAY-PEERS activate
   !
   vrf SVC01_VRF01
      rd 10.255.1.5:10
      route-target import evpn 10:10
      route-target export evpn 10:10
      router-id 10.255.1.5
      redistribute connected
!
router isis CORE
   net 49.0001.0102.5500.1005.00
   router-id ipv4 10.255.1.5
   is-type level-2
   log-adjacency-changes
   advertise passive-only
   !
   address-family ipv4 unicast
      maximum-paths 4
      fast-reroute ti-lfa mode link-protection
   !
   segment-routing mpls
      no shutdown
!
management ssh
   no shutdown
   !
   vrf default
      no shutdown
!
end
